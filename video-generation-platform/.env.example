# =============================================================================
# Video Generation Platform - Environment Configuration
# =============================================================================
# Copy this file to .env and update the values according to your environment
# WARNING: Never commit .env files to version control!
# =============================================================================

# =============================================================================
# ENVIRONMENT SETTINGS
# =============================================================================
NODE_ENV=production
ENVIRONMENT=production
BUILD_NUMBER=latest
IMAGE_TAG=latest
TZ=UTC
LOG_LEVEL=info

# =============================================================================
# SERVICE PORTS CONFIGURATION
# =============================================================================
# Backend API
BACKEND_PORT=3000
BACKEND_DEBUG_PORT=9229

# Frontend
FRONTEND_HTTP_PORT=80
FRONTEND_HTTPS_PORT=443

# Orchestrator
ORCHESTRATOR_PORT=9000

# Database
DATABASE_PORT=5432

# Redis
REDIS_PORT=6379

# Monitoring
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001
NODE_EXPORTER_PORT=9100
CADVISOR_PORT=8080

# Optional Services
MINIO_API_PORT=9001
MINIO_CONSOLE_PORT=9002

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================
DB_NAME=video_generation
DB_USER=postgres
DB_PASSWORD=your-super-secret-database-password
DB_HOST=database
DB_PORT=5432
DB_SSL=false

# Database Performance Settings
DB_MAX_CONNECTIONS=100
DB_SHARED_BUFFERS=128MB
DB_EFFECTIVE_CACHE_SIZE=512MB
DB_MAINTENANCE_WORK_MEM=64MB
DB_CHECKPOINT_COMPLETION_TARGET=0.9
DB_WAL_BUFFERS=16MB
DB_DEFAULT_STATISTICS_TARGET=100

# Database Connection URL (auto-generated, don't modify)
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}

# =============================================================================
# SUPABASE CONFIGURATION (Alternative to direct PostgreSQL)
# =============================================================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_KEY=your-supabase-service-role-key
SUPABASE_JWT_SECRET=your-supabase-jwt-secret

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=your-redis-password
REDIS_MAXMEMORY=1gb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# =============================================================================
# AWS S3 CONFIGURATION
# =============================================================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_S3_BUCKET=your-s3-bucket-name
AWS_S3_REGION=us-east-1
AWS_CLOUDFRONT_DOMAIN=your-cloudfront-domain.cloudfront.net

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-at-least-32-characters-long
JWT_EXPIRATION=7d
JWT_ALGORITHM=HS256

# Session Configuration
SESSION_SECRET=your-super-secret-session-key-at-least-32-characters-long
SESSION_MAX_AGE=86400000

# Webhook Security
WEBHOOK_SECRET=your-webhook-secret-key

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,https://yourdomain.com

# =============================================================================
# API CONFIGURATION
# =============================================================================
# API Base URLs
VITE_API_BASE_URL=http://localhost:3000/api/v1
API_VERSION=v1
API_PREFIX=/api/v1

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# Request Limits
MAX_REQUEST_SIZE=50mb
MAX_FILE_SIZE=100mb

# =============================================================================
# VIDEO PROCESSING CONFIGURATION
# =============================================================================
# FFmpeg Configuration
FFMPEG_PATH=/usr/bin/ffmpeg
FFPROBE_PATH=/usr/bin/ffprobe
TEMP_DIR=/tmp/video-processing

# Processing Limits
IMMEDIATE_RESPONSE_THRESHOLD=30000
MAX_CONCURRENT_JOBS=5
JOB_TIMEOUT=1800000
MAX_VIDEO_DURATION=600
MAX_VIDEO_SIZE=104857600

# Quality Settings
DEFAULT_VIDEO_CODEC=libx264
DEFAULT_AUDIO_CODEC=aac
DEFAULT_VIDEO_BITRATE=2000k
DEFAULT_AUDIO_BITRATE=128k

# =============================================================================
# ORCHESTRATOR CONFIGURATION
# =============================================================================
ORCHESTRATOR_MAX_CONCURRENT_JOBS=10
ORCHESTRATOR_JOB_TIMEOUT=1800000
ORCHESTRATOR_HEALTH_CHECK_INTERVAL=30000
ORCHESTRATOR_QUEUE_RETRY_ATTEMPTS=3
ORCHESTRATOR_QUEUE_RETRY_DELAY=5000

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================
# Vite Environment Variables (must start with VITE_)
VITE_API_BASE_URL=http://localhost:3000/api/v1
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-supabase-anon-key
VITE_AWS_S3_BUCKET=your-s3-bucket-name
VITE_ENABLE_DEVTOOLS=false
VITE_LOG_LEVEL=error
VITE_APP_VERSION=1.0.0

# Nginx Configuration
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024
NGINX_KEEPALIVE_TIMEOUT=65
NGINX_CLIENT_MAX_BODY_SIZE=50m

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
# Prometheus
PROMETHEUS_RETENTION_TIME=15d
PROMETHEUS_RETENTION_SIZE=5GB

# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your-grafana-admin-password
GRAFANA_ROOT_URL=http://localhost:3001
GRAFANA_SMTP_ENABLED=false
GRAFANA_SMTP_HOST=smtp.gmail.com:587
GRAFANA_SMTP_USER=your-email@gmail.com
GRAFANA_SMTP_PASSWORD=your-smtp-password
GRAFANA_SMTP_FROM_ADDRESS=grafana@yourdomain.com

# Metrics and Monitoring
METRICS_ENABLED=true
ENABLE_SWAGGER=false
HEALTH_CHECK_INTERVAL=30000

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
# Domain and SSL
DOMAIN=yourdomain.com
ACME_EMAIL=admin@yourdomain.com

# Traefik Configuration
TRAEFIK_AUTH=admin:$2y$10$your-bcrypt-hashed-password

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
# Database Backup
BACKUP_SCHEDULE=@daily
BACKUP_KEEP_DAYS=7
BACKUP_KEEP_WEEKS=4
BACKUP_KEEP_MONTHS=6

# S3 Backup
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_S3_PREFIX=video-platform-backups/

# =============================================================================
# DOCKER RESOURCE LIMITS
# =============================================================================
# Backend Resources
BACKEND_REPLICAS=2
BACKEND_CPU_LIMIT=2.0
BACKEND_MEMORY_LIMIT=1G
BACKEND_CPU_RESERVATION=0.5
BACKEND_MEMORY_RESERVATION=512M

# Frontend Resources
FRONTEND_REPLICAS=2
FRONTEND_CPU_LIMIT=1.0
FRONTEND_MEMORY_LIMIT=512M
FRONTEND_CPU_RESERVATION=0.25
FRONTEND_MEMORY_RESERVATION=128M

# Orchestrator Resources
ORCHESTRATOR_REPLICAS=2
ORCHESTRATOR_CPU_LIMIT=2.0
ORCHESTRATOR_MEMORY_LIMIT=1G
ORCHESTRATOR_CPU_RESERVATION=0.5
ORCHESTRATOR_MEMORY_RESERVATION=256M

# Database Resources
DB_CPU_LIMIT=2.0
DB_MEMORY_LIMIT=1G
DB_CPU_RESERVATION=0.5
DB_MEMORY_RESERVATION=256M

# Redis Resources
REDIS_CPU_LIMIT=1.0
REDIS_MEMORY_LIMIT=1.5G
REDIS_CPU_RESERVATION=0.25
REDIS_MEMORY_RESERVATION=512M

# Prometheus Resources
PROMETHEUS_CPU_LIMIT=1.0
PROMETHEUS_MEMORY_LIMIT=1G
PROMETHEUS_CPU_RESERVATION=0.25
PROMETHEUS_MEMORY_RESERVATION=256M

# Grafana Resources
GRAFANA_CPU_LIMIT=0.5
GRAFANA_MEMORY_LIMIT=256M
GRAFANA_CPU_RESERVATION=0.1
GRAFANA_MEMORY_RESERVATION=64M

# =============================================================================
# MINIO CONFIGURATION (S3-Compatible Storage for Development)
# =============================================================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin123
MINIO_BROWSER_REDIRECT_URL=http://localhost:9002
MINIO_CPU_LIMIT=1.0
MINIO_MEMORY_LIMIT=512M
MINIO_CPU_RESERVATION=0.25
MINIO_MEMORY_RESERVATION=128M

# =============================================================================
# EXTERNAL SERVICES (Optional)
# =============================================================================
# Error Tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Application Performance Monitoring
NEW_RELIC_LICENSE_KEY=your-new-relic-license-key
NEW_RELIC_APP_NAME=video-generation-platform

# DataDog Monitoring
DATADOG_API_KEY=your-datadog-api-key

# Email Service (SendGrid, AWS SES, etc.)
EMAIL_SERVICE=sendgrid
EMAIL_API_KEY=your-email-service-api-key
EMAIL_FROM=noreply@yourdomain.com

# =============================================================================
# DEVELOPMENT OVERRIDES
# =============================================================================
# These variables override defaults for development environment
# Uncomment and modify as needed for local development

# DEV_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/video_generation_dev
# DEV_REDIS_URL=redis://localhost:6379
# DEV_LOG_LEVEL=debug
# DEV_CORS_ORIGINS=http://localhost:3000,http://localhost:5173
# DEV_IMMEDIATE_RESPONSE_THRESHOLD=10000
# DEV_MAX_CONCURRENT_JOBS=2

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Enable/disable features
FEATURE_MONITORING=true
FEATURE_OPTIONAL_SERVICES=false
FEATURE_SSL=true
FEATURE_RATE_LIMITING=true
FEATURE_CACHING=true
FEATURE_QUEUE_PROCESSING=true

# =============================================================================
# NOTES AND WARNINGS
# =============================================================================
#
# 1. SECURITY: Replace all default passwords and secrets with strong values
# 2. BACKUP: Ensure your backup strategy is configured properly
# 3. MONITORING: Enable monitoring in production environments
# 4. SSL: Configure proper SSL certificates for production
# 5. RESOURCES: Adjust resource limits based on your infrastructure
# 6. SCALING: Configure replicas based on expected load
#
# For more information, see:
# - Documentation: README.md
# - Docker Compose: docker-compose.yml
# - Security Guide: docs/security.md
# - Deployment Guide: docs/deployment.md
#
# =============================================================================
